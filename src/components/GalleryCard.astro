---
import type { GalleryItem } from "@/types/config";

interface Props {
	image: GalleryItem;
}

const { image } = Astro.props;
---

<div
  class="gallery-card relative overflow-hidden rounded-xl transition-all duration-300 cursor-pointer group card-base"
  data-image-id={image.id}
>
  <div class="relative">
    <img
      src={image.imageUrl}
      alt={image.title}
      class="w-full h-auto aspect-square object-cover transition-all duration-500 rounded-t-xl"
      loading="lazy"
    />
    <div class="absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center rounded-t-xl">
      <div class="text-center text-white p-4">
        <h4 class="text-lg font-bold mb-2">{image.title}</h4>
        <p class="text-sm opacity-90">{image.description}</p>
      </div>
    </div>
    <div class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
      <button class="expand-btn text-white p-2 rounded-full bg-primary bg-opacity-80 hover:bg-opacity-100 transition-all duration-300">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>
        </svg>
      </button>
    </div>
  </div>

  <div class="p-4 text-black/90 dark:text-white/90">
    <h3 class="text-lg font-semibold line-clamp-1 group-hover:text-primary transition-colors">{image.title}</h3>
    <p class="text-sm text-black/60 dark:text-white/60 mt-1">{image.photographer}</p>
    <p class="text-xs text-black/50 dark:text-white/50 mt-0.5">{image.date}</p>
    <div class="flex flex-wrap gap-1 mt-3">
      {image.tags.map((tag) => (
        <span class="text-xs text-black/70 dark:text-white/70 bg-black/5 dark:bg-white/10 px-2 py-1 rounded-md">
          {tag}
        </span>
      ))}
    </div>
  </div>
</div>

<style>
  .gallery-card {
    height: 100%;
    display: flex;
    flex-direction: column;
    transition: all 0.3s ease;
    border: 1px solid var(--color-border);
  }

  .gallery-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.05);
  }

  .line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>